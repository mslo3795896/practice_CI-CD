var z=Object.defineProperty,O=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var S=(s,t,i)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,p=(s,t)=>{for(var i in t||(t={}))k.call(t,i)&&S(s,i,t[i]);if(L)for(var i of L(t))w.call(t,i)&&S(s,i,t[i]);return s},y=(s,t)=>O(s,P(t));import{_ as C,b as v}from"./index-9ec1f801.js";import{Z as A,_ as E,$ as I,D as R,E as T,r as $,a0 as x,m as _,U as M,j as N,o as V,k as G,w as Q,y as U,H as B}from"./vendor-c6516222.js";function H(s){return{all:s=s||new Map,on:function(t,i){var a=s.get(t);a?a.push(i):s.set(t,[i])},off:function(t,i){var a=s.get(t);a&&(i?a.splice(a.indexOf(i)>>>0,1):s.set(t,[]))},emit:function(t,i){var a=s.get(t);a&&a.slice().map(function(l){l(i)}),(a=s.get("*"))&&a.slice().map(function(l){l(t,i)})}}}function F({api:s="",filterData:t={},customGetList:i}){const a=A(),l=E(),r=I(),m=H();m.on("onClickToolbar"),R(()=>{s===""&&console.error("\u5C1A\u672A\u5B9A\u7FA9 api")}),T(()=>{m.off("onClickToolbar")});const n=$({searchbarOriginValue:{},count:0,list:[],listLoading:{flag:!1},paginations:{current_page:1,total:0,page_size:10,page_sizes:[10,15,20,25,50,100],layout:"total, sizes, prev, pager, next, jumper"},pageSizeChanging:!1}),g={goAddRoute:()=>{const{status:e,pageGroupId:o=void 0,pageId:u=void 0}=a.state.global.insidePage;e?a.dispatch("global/setInsidePage",{status:"add",pageGroupId:o,pageId:u}):l.push(`${r.path}/edit`)},goEditRoute:e=>{l.push({path:`${r.path}/edit`,query:y(p({},e),{from:r.query})})},onSearchReset:()=>{const e=a.state.global.insidePage.status;l.push({path:r.path,query:y(p({},n.searchbarOriginValue),{id:e?r.query.id:void 0,page:1})})},onSearch:(e,o=!1)=>{o||(e.page=1);const u=r.query;let d=p({},u);for(let h in e)d[h]=e[h],d[h]||delete d[h];l.push({path:r.path,query:d})},updateCurrentPage:e=>{n.pageSizeChanging||g.onSearch(y(p({},t),{page:e}),!0)},updatePageSize:e=>{n.pageSizeChanging=!0,g.onSearch(y(p({},t),{page_size:e})),setTimeout(()=>{n.pageSizeChanging=!1})},getList:({page:e,pageSize:o,where:u,fn:d}={})=>{n.listLoading.flag=!0;const h=r.query;n.paginations.current_page=e||Number(h.page)||1,n.paginations.page_size=o||Number(h.page_size)||n.paginations.page_size;let c=Object.assign(g.getRouteQuery(),{page:n.paginations.current_page,limit:n.paginations.page_size});u&&(c=Object.assign(c,u||{})),t&&((()=>{Object.keys(t).forEach(f=>{t[f]===""&&(t[f]=void 0)})})(),c=Object.assign(c,t||{})),i?i(c,d):(()=>{const b=a.state.global.insidePage.status;a.dispatch("item/search",{api:s,query:p({brand_id:b?r.query.id:void 0},c)}).then(f=>{const{items:q,pagination:j}=f;n.list=[...q],n.paginations.total=j.total}).finally(()=>{n.listLoading.flag=!1}),d&&d()})()},checkout:async({api:e,ids:o})=>{await a.dispatch("item/checkout",{api:e,ids:o}),g.showMessage("\u56DE\u5B58")},batchUpdateStateAndGetList:async({ids:e,state:o})=>{await a.dispatch("item/updateState",{api:s,ids:e,state:o}),g.getList(),_.success("\u72C0\u614B\u66F4\u65B0\u6210\u529F")},batchDeleteAndGetList:async({ids:e})=>{await a.dispatch("item/remove",{api:s,ids:e}),g.getList(),_.success("\u522A\u9664\u6210\u529F")},batchCheckoutAndGetList:async({ids:e})=>{await a.dispatch("item/checkout",{api:s,ids:e}),g.getList(),_.success("\u56DE\u5B58\u6210\u529F")},updateState:async({api:e,ids:o,state:u})=>{await a.dispatch("item/updateState",{api:e,ids:o,state:u}),g.showMessage("\u72C0\u614B\u66F4\u65B0\u6210\u529F")},onOrderChange:async e=>{await a.dispatch("item/ordering",{api:s,submitData:e}),g.showMessage("\u6392\u5E8F\u66F4\u65B0\u6210\u529F")},init:()=>{n.count>0&&Object.keys(t).forEach(e=>{t[e]=r.query[e]}),n.count++,g.getList()},setRouteQuery:(e,o)=>{let u=Object.assign({},r.query);return typeof e=="object"?u=e:u[e]=o,u},getRouteQuery:()=>{const e=p({},r.query),o=["id","pid","category_id","access"],u=["start_date","end_date"],d=a.state.global.insidePage.status;let h={};return!!d&&delete e.id,Object.keys(e).forEach(c=>{t[c]=o.includes(c)?Number(e[c]):u.includes(c)?this.$options.filters.storeDateFormat(e[c]):e[c],h[c]=e[c]}),h},showMessage:(e="\u66F4\u65B0")=>{g.getList(),e.success(`${e}\u6210\u529F`)}};return g.init(),p(p({},x(n)),g)}const Z={setup(){const s=F({api:"brand",filterData:{search:void 0,state:void 0}});return p({},s)},components:{Layout:M(()=>v(()=>import("./main-61010287.js"),["cms-build/js/main-61010287.js","cms-build/css/main-d00d35ab.css","cms-build/js/index-9ec1f801.js","cms-build/css/index-fdcc14a8.css","cms-build/js/vendor-c6516222.js"]))},computed:{page(){return this.paginations.page_size}}};function D(s,t,i,a,l,r){const m=N("Layout");return V(),G(m,null,{default:Q(()=>[U("LIST: "+B(r.page),1)]),_:1})}var Y=C(Z,[["render",D]]);export{Y as default};
//# sourceMappingURL=list-5109ea7b.js.map
